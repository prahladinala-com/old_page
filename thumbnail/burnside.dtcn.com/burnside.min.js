"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){function r(t,r,e,o){var i=r&&r.prototype instanceof n?r:n,a=Object.create(i.prototype),c=new l(o||[]);return a._invoke=u(t,e,c),a}function e(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}function n(){}function o(){}function i(){}function a(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function c(t){function r(n,o,i,a){var c=e(t[n],t,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===(void 0===f?"undefined":_typeof(f))&&m.call(f,"__await")?Promise.resolve(f.__await).then(function(t){r("next",t,i,a)},function(t){r("throw",t,i,a)}):Promise.resolve(f).then(function(t){u.value=t,i(u)},a)}a(c.arg)}var n;this._invoke=function(t,e){function o(){return new Promise(function(n,o){r(t,e,n,o)})}return n=n?n.then(o,o):o()}}function u(t,r,n){var o=_;return function(i,a){if(o===O)throw new Error("Generator is already running");if(o===S){if("throw"===i)throw a;return y()}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=f(c,n);if(u){if(u===k)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===_)throw o=S,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=O;var h=e(t,r,n);if("normal"===h.type){if(o=n.done?S:j,h.arg===k)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(o=S,n.method="throw",n.arg=h.arg)}}}function f(t,r){var n=t.iterator[r.method];if(n===d){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=d,f(t,r),"throw"===r.method))return k;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var o=e(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,k;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=d),r.delegate=null,k):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,k)}function h(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function s(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function l(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function p(t){if(t){var r=t[w];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(m.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=d,r.done=!0,r};return n.next=n}}return{next:y}}function y(){return{value:d,done:!0}}var d,v=Object.prototype,m=v.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},w=g.iterator||"@@iterator",L=g.asyncIterator||"@@asyncIterator",x=g.toStringTag||"@@toStringTag",b="object"===("undefined"==typeof module?"undefined":_typeof(module)),E=t.regeneratorRuntime;if(E)b&&(module.exports=E);else{(E=t.regeneratorRuntime=b?module.exports:{}).wrap=r;var _="suspendedStart",j="suspendedYield",O="executing",S="completed",k={},G={};G[w]=function(){return this};var N=Object.getPrototypeOf,P=N&&N(N(p([])));P&&P!==v&&m.call(P,w)&&(G=P);var F=i.prototype=n.prototype=Object.create(G);o.prototype=F.constructor=i,i.constructor=o,i[x]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===o||"GeneratorFunction"===(r.displayName||r.name))},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,i):(t.__proto__=i,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(F),t},E.awrap=function(t){return{__await:t}},a(c.prototype),c.prototype[L]=function(){return this},E.AsyncIterator=c,E.async=function(t,e,n,o){var i=new c(r(t,e,n,o));return E.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},a(F),F[x]="Generator",F[w]=function(){return this},F.toString=function(){return"[object Generator]"},E.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},E.values=p,l.prototype={constructor:l,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(s),!t)for(var r in this)"t"===r.charAt(0)&&m.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=d)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=d),!!n}if(this.done)throw t;for(var e=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),c=m.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&m.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o.finallyLoc,k):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),k},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),s(e),k}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;s(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:p(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=d),k}}}}(function(){return this}()||Function("return this")());
"use strict";function _classCallCheck(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function o(o,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(e,n,r){return n&&o(e.prototype,n),r&&o(e,r),e}}(),Logger=function(){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,o),this.prefix="DTAds:"+e,this.debug=n}return _createClass(o,[{key:"log",value:function(o,e){var n=this.prefix;this.debug&&(void 0!==o&&void 0!==e&&("string"==typeof o?(o=n+":"+o,console.log(o,e)):console.log(n,o,e)),void 0!==o&&void 0===e&&("string"==typeof o?(o=n+":"+o,console.log(o)):console.log(n,o)))}},{key:"warn",value:function(o,e){var n=this.prefix;this.debug&&(void 0!==o&&void 0!==e&&("string"==typeof o?(o=n+":"+o,console.warn(o,e)):console.warn(n,o,e)),void 0!==o&&void 0===e&&("string"==typeof o?(o=n+":"+o,console.warn(o)):console.warn(n,o)))}},{key:"error",value:function(o,e){var n=this.prefix;this.debug&&(void 0!==o&&void 0!==e&&("string"==typeof o?(o=n+":"+o,console.error(o,e)):console.error(n,o,e)),void 0!==o&&void 0===e&&("string"==typeof o?(o=n+":"+o,console.error(o)):console.error(n,o)))}}]),o}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),_Bigtop=function(){function t(e){e.enabled;var i=e.barkeep,r=e.ratios,n=e.allowed_experiences,o=e.prefix,s=e.debug,a=void 0!==s&&s,l=e.max_height,c=void 0===l?500:l;_classCallCheck(this,t),this.logger=new Logger("Ads:Bigtop",a),this.logger.log(a),this.prefix=o,this.pint_cont_class=o+"-bigtop-container",this.barkeep=i,this.allowed_experiences=n,this.max_height=c,this.ratios=r||[{max_width:9999,ratio:3.84},{max_width:480,ratio:2.181818182}],this.ratios.sort(function(t,e){return e.max_width-t.max_width}),void 0!==this.barkeep?this.setup():this.logger.error("Barkeep not referenced")}return _createClass(t,[{key:"setup",value:function(){var t=this.prefix,e=this.allowed_experiences,i=this.pint_cont_class,r=e.map(function(e){return t+"-"+e}).join(" "),n='<div class="m-pint h-pint '+i+'" data-type="static" data-priority="1">\n\t\t\t\t\t\t\t\t<div class="'+t+"-slot "+t+"-slot-bigtop "+r+'" data-slot-type="bigtop"></div>\n\t\t\t\t\t\t\t</div>';return this.barkeep.insert(n)?(this.slot_insert_listener(),!0):(this.logger.error("Bigtop container unable to be inserted"),!1)}},{key:"slot_insert_listener",value:function(){var t=this;window.addEventListener("bs_slot_elements_processed",function(e){t.logger.log("slot_render_listener");var i=document.querySelector("."+t.pint_cont_class);if(i){var r=i.querySelector("."+t.prefix+"-slot");e.detail.slots=[].slice.call(e.detail.slots);var n=!0,o=!1,s=void 0;try{for(var a,l=e.detail.slots[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.el_id===r.id){t.slot=c;break}}}catch(t){o=!0,s=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw s}}t.slot&&t.slot_render_listener()}})}},{key:"slot_render_listener",value:function(){var t=this;window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("slotRenderEnded",function(e){if(e.slot===t.slot.gpt_slot&&!e.isEmpty){var i=t.slot.el.querySelector("iframe");i.width="100%",i.style.maxHeight=t.max_height+"px",t.resize_manager(i),t.barkeep.setup();var r=!1;window.addEventListener("resize",function(e){r||(t.resize_manager(i),setTimeout(function(){r=!1,clearTimeout()},50),r=!0)})}})})}},{key:"resize_manager",value:function(t){this.ratios.forEach(function(e){var i=t.getBoundingClientRect().width,r=i/e.ratio;i<=e.max_width&&(t.height=r+"px")})}}]),t}();
"use strict";function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,i){try{var s=t[o](i),a=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(a).then(function(e){r("next",e)},function(e){r("throw",e)});e(a)}return r("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Amazon=function(){function e(t){var n=t.enable,r=void 0===n||n,o=t.enable_refresh,i=void 0===o||o,s=t.pubID,a=void 0===s?0:s,u=t.timeout,c=void 0===u?600:u,l=t.refresh_timeout,f=void 0===l?500:l,g=t.debug,d=void 0!==g&&g;_classCallCheck(this,e),this.logger=new Logger("Pre:Amazon",d),this.logger.log("Init"),r?a?(this.args={enable_refresh:i,pubID:a,timeout:c,refresh_timeout:f},this.amazonReady=!1,function(e,t,n,r,o,i,s){function a(n,r){t[e]._Q.push([n,r])}t[e]||(t[e]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(i=n.createElement(r)).async=!0,i.src="//c.amazon-adsystem.com/aax2/apstag.js",(s=n.getElementsByTagName(r)[0]).parentNode.insertBefore(i,s))}("apstag",window,document,"script")):this.logger.warn("No pub id"):this.logger.warn("Module not enabled")}return _createClass(e,[{key:"isSetup",value:function(){var e=this;return new Promise(function(t){e.amazonReady&&t(!0),window.apstag.init({pubID:e.args.pubID,adServer:"googletag"},function(){e.logger.log("apstag initiated!"),e.amazonReady=!0,window.addEventListener("bs_slot_elements_defined",function(){e.logger.log("bs_slot_elements_defined"),window.apstag.setDisplayBids()}),t(!0)})})}},{key:"processSlots",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.amazonReady){e.next=4;break}return e.next=3,this.isSetup();case 3:this.amazonReady=e.sent;case 4:if(n&&n.length){e.next=6;break}return e.abrupt("return",[]);case 6:return t=[],n.forEach(function(e){e.type&&"out_of_page"!==e.type&&t.push({slotID:e.el_id,slotName:r+"/"+e.type,sizes:e.sizes})}),e.abrupt("return",t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"process",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];return new Promise(function(r,o){e.processSlots(t,n).then(function(t){e.logger.log("Getting bids for slots",t),window.apstag.fetchBids({slots:t,timeout:e.args.timeout},function(e){r(e)})})})}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];return new Promise(function(r,o){e.processSlots(t,n).then(function(t){e.logger.log("Getting bids for slots",t),window.apstag.fetchBids({slots:t,timeout:e.args.refresh_timeout},function(e){r(e)})})})}}]),e}();
"use strict";function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,i){for(var s=0;s<i.length;s++){var r=i[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(i,s,r){return s&&e(i.prototype,s),r&&e(i,r),i}}(),Prebid=function(){function e(i){var s=i.enable,r=void 0===s||s,t=i.enable_refresh,n=void 0===t||t,a=i.bids,o=void 0===a?[]:a,d=i.fb_placement_ids,l=void 0===d?{}:d,u=i.timeout,p=void 0===u?600:u,c=i.refresh_timeout,f=void 0===c?500:c,g=i.debug,b=void 0===g?500:g;_classCallCheck(this,e),r?(this.logger=new Logger("Pre:Prebid",b),this.logger.log("Init"),this.args={enable_refresh:n,bids:o,timeout:p,refresh_timeout:f,fb_placement_ids:l},this.setup(),window.pbjs=void 0!==window.pbjs?window.pbjs:{},window.pbjs.que=window.pbjs.que||[]):this.logger.warn("Module not enabled")}return _createClass(e,[{key:"setup",value:function(){var e=document.createElement("script");document.head.appendChild(e),e.src="//burnside.dtcn.com/prebid/dt-prebid.js"}},{key:"process",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments[1];return this.logger.log("Getting and process bids..."),new Promise(function(r,t){var n=e.args.timeout,a=e.args.bids,o=[],d=e.args.fb_placement_ids;a.length||r("No Bidders");var l=!0,u=!1,p=void 0;try{for(var c,f=i[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var g=c.value;if(g.sizes&&g.sizes.length&&g.el_id){e.logger.log("Starting bid on slot (id: "+g.el_id+") of type ("+g.type+"))");var b=[],h=!0,v=!1,m=void 0;try{for(var y,w=a[Symbol.iterator]();!(h=(y=w.next()).done);h=!0)!function(e){var i=void 0,r=void 0,t=void 0;switch(i=e.bid_map||{},e.bidder){case"aol":for(k=g.sizes.length;k--;)i[r=g.sizes[k][0]+"x"+g.sizes[k][1]]&&((t=JSON.parse(JSON.stringify(e))).params.placement=i[r][0],t.params.sizeId=i[r][1],b.push(JSON.parse(JSON.stringify(t))));break;case"yieldbot":for(k=g.sizes.length;k--;)i[r=g.sizes[k][0]+"x"+g.sizes[k][1]]&&((t=JSON.parse(JSON.stringify(e))).params.psn=i[r][0],t.params.slot=i[r][1],b.push(JSON.parse(JSON.stringify(t))));break;case"pulsepoint":for(k=g.sizes.length;k--;)i[r=g.sizes[k][0]+"x"+g.sizes[k][1]]&&((t=JSON.parse(JSON.stringify(e))).params.cf=r,t.params.ct=i[r],b.push(JSON.parse(JSON.stringify(t))));break;case"sovrn":for(k=g.sizes.length;k--;)i[r=g.sizes[k][0]+"x"+g.sizes[k][1]]&&((t=JSON.parse(JSON.stringify(e))).params.tagid=i[r],b.push(JSON.parse(JSON.stringify(t))));break;case"sonobi":(t=JSON.parse(JSON.stringify(e))).params.ad_unit=s,t.params.dom_id=g.el_id,b.push(JSON.parse(JSON.stringify(t)));break;case"audienceNetwork":var n=g.sizes;e.params.placementId=d.btf,n.forEach(function(i){return d.leaderboard&&i.includes(320)&&i.includes(50)?(e.params.placementId=d.leaderboard,void delete d.leaderboard):d.mpu.length&&i.includes(300)&&i.includes(250)?(e.params.placementId=d.mpu[0],void(d.mpu=d.mpu.slice(1,d.mpu.length))):void 0}),b.push(e);break;default:b.push(e)}}(y.value)}catch(e){v=!0,m=e}finally{try{!h&&w.return&&w.return()}finally{if(v)throw m}}o.push({code:g.el_id,sizes:JSON.parse(JSON.stringify(g.sizes)),bids:JSON.parse(JSON.stringify(b))})}}}catch(e){u=!0,p=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw p}}e.logger.log("ad_units",o),o.length?window.pbjs.que.push(function(){setTimeout(function(){r("timeout")},n+400),window.pbjs.addAdUnits(o),window.pbjs.requestBids({timeout:n,adUnits:o,bidsBackHandler:function(e){var s=void 0,t=void 0;s=(s=window.pbjs.getAdserverTargeting())||{};for(var n=0;n<i.length;n++)if(!(!i[n].el_id||!s[i[n].el_id])){t=(t=s[i[n].el_id])||{};for(var a in t)t.hasOwnProperty(a)&&t[a]&&(i[n].keyvals[a]=t[a])}r(e)}})}):r("empty")})}},{key:"refresh",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.logger.log("Refreshing bids..."),new Promise(function(s,r){var t=e.args,n=t.bids,a=t.enable_refresh,o=t.refresh_timeout,d=void 0;if(a)if(n.length){d=[];for(var l=0;l<i.length;l++)i[l].sizes&&i[l].sizes.length&&i[l].el_id&&d.push(i[l].el_id);d.length?window.pbjs.que.push(function(){setTimeout(function(){s("timeout")},o),window.pbjs.requestBids({adUnitCodes:d,bidsBackHandler:function(e){window.pbjs.setTargetingForGPTAsync(d),s(e)}})}):s("empty")}else s("no bidders");else s("disabled")})}}]),e}();
"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(r,n,o){return n&&e(r.prototype,n),o&&e(r,o),r}}(),Pre=function(){function e(r){var n=r.enable,o=void 0!==n&&n,i=r.prebid,a=void 0===i?{}:i,t=r.amazon,f=void 0===t?{}:t,s=r.timeout,l=void 0===s?600:s,u=r.refresh_timeout,c=void 0===u?500:u,d=r.enable_refresh,b=void 0===d||d,g=r.onBidTimeout,m=void 0===g?null:g,h=r.debug,p=void 0!==h&&h,v=r.init,w=void 0===v?null:v;_classCallCheck(this,e),this.logger=new Logger("Pre",p),this.is_enabled=o,o?(this.logger.log("Init"),this.args={enable_refresh:b,timeout:l,refresh_timeout:c,prebid:a,amazon:f,onBidTimeout:m},"function"==typeof w&&w(),a&&a.enable?(a.enable_refresh=b,a.refresh_timeout=c,a.timeout=l,a.debug=p,this.prebid=new Prebid(a)):this.logger.log("Prebid disabled"),f&&f.enable?(f.enable_refresh=b,f.refresh_timeout=c,f.timeout=l,f.debug=p,this.amazon=new Amazon(f)):this.logger.log("Amazon disabled"),(f.enable||a.enable)&&o||(this.args.enable_refresh=!1)):this.logger.warn("Module not enabled")}return _createClass(e,[{key:"process",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];return new Promise(function(o,i){var a=e.args.onBidTimeout||null,t=window.performance?performance.now():0,f={prebid:!e.prebid,amazon:!e.amazon},s=function(){for(var e in f)if(f.hasOwnProperty(e)&&!f[e])return;o("Completed")},l=function(r,n){var o=(window.performance?performance.now():0)-t;e.logger.warn("Pre: "+r+": took "+o+"ms to get bids back",n),"timeout"===n&&"function"==typeof a&&a(r,n)};e.prebid&&e.prebid.process(r,n).then(function(e){f.prebid=!0,l("prebid",e),s()},function(r){f.prebid=!0,e.logger.error("Prebid barfed",r),s()}).catch(function(r){e.logger.error(r)}),e.amazon&&e.amazon.process(r,n).then(function(e){f.amazon=!0,l("amazon",e),s()},function(r){f.amazon=!0,e.logger.error("amazon barfed",r),s()}).catch(function(r){e.logger.error(r)})})}},{key:"refresh",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.logger.log("Refreshing slots..."),new Promise(function(n,o){var i=e.args,a=i.onBidTimeout,t=i.enable_refresh,f=window.performance?performance.now():0;t||n("Disabled");var s={prebid:!e.prebid,amazon:!e.amazon},l=function(){for(k in s)if(s.hasOwnProperty(k)&&!s[k])return;n("Completed")},u=function(r,n){var o=(window.performance?performance.now():0)-f;e.logger.warn("Pre: "+r+": took "+o+"ms to get bids back",n),"timeout"===n&&"function"==typeof a&&a(r,n)};e.prebid&&e.prebid.refresh(r).then(function(e){s.prebid=!0,u("prebid",e),l()},function(r){s.prebid=!0,e.logger.error("Prebid refresh barfed",r),l()}).catch(function(r){e.logger.error(r)}),e.amazon&&e.amazon.refresh(r).then(function(e){s.amazon=!0,u("amazon",e),l()},function(r){s.amazon=!0,e.logger.error("amazon refresh barfed",r),l()}).catch(function(r){e.logger.error(r)})})}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,o,s){return o&&e(t.prototype,o),s&&e(t,s),t}}(),Ads=function(){function e(t){var o=this,s=t.prefix,r=t.self,i=void 0===r?null:r,n=t.refresh_throttle,l=void 0===n?1e3:n,a=t.lazy,g=void 0!==a&&a,u=t.lazy_mod,d=void 0===u?140:u,h=t.refresh_in_view,p=void 0!==h&&h,c=t.keyvals,f=void 0===c?{}:c,_=t.unit_name,v=void 0===_?"":_,y=t.demo_unit_name,w=t.onAdsReady,m=t.slotsRendered,b=t.slot_args,k=void 0===b?{}:b,S=t.supports,x=void 0===S?{}:S,z=t.krux_id,P=void 0===z?null:z,A=t.demo_key,E=void 0===A?"dtdemo":A,L=t.demo_val,O=t.debug,q=t.experience,C=t.bigtop,N=t.handleGPT;if(_classCallCheck(this,e),this.logger=new Logger("Ads",O),this.logger.log("Init"),this.args={prefix:s,experience:q,unit_name:v,slot_args:k,keyvals:f,supports:x,oop_class:k&&k.out_of_page&&k.out_of_page.class?k.out_of_page.class:s+"-out-of-page",lazy:g,lazy_mod:d,refresh_in_view:p,refresh_throttle:l,onAdsReady:w,slotsRendered:m,handleGPT:N,demo_key:E,demo_val:L,demo_unit_name:y},this.self=i,this.logger.log("Lazy loading: "+g),this.slots=[],this.lazy_slot_ids=[],this.krux_id=P,this.unit_name=v,this.busy=!1,L&&L.length&&y&&(this.unit_name=y),this.refresh_lock=!1,this.out_of_page_rendered=!1,E&&L?this.logger.warn("demo set",E+":"+L):this.logger.log("demo not set",E+":"+L),this._body=document.body||document.getElementsByTagName("body")[0],"object"===_typeof(window.googletag)){if(!this.hasOOP()&&k.hasOwnProperty("out_of_page")){var R=document.createElement("div");R.className=s+"-slot "+this.args.oop_class,R.setAttribute("data-slot-type","out_of_page"),this._body.appendChild(R)}this.setupGpt(),this.bigtop_enabled=C.enabled,"undefined"!=typeof _Barkeep&&C.enabled&&k.hasOwnProperty("out_of_page")?(C.debug=O,C.prefix=s,this.Bigtop=new _Bigtop(C)):this.logger.warn("_Barkeep not available or OOP slot not set"),this.processEl(this._body),"function"==typeof w&&w(),window.addEventListener("load",function(){window.requestAnimationFrame(o.actuallyProcessLazyQueue.bind(o))})}else this.logger.error("No googletag found")}return _createClass(e,[{key:"hasOOP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.args,o=t.oop_class;t.prefix,t.experience;return!!(e?e.querySelector("."+o):document.querySelector("."+o))}},{key:"is_el_in_viewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return!1;var o=e.getBoundingClientRect();return o.bottom>0-t&&o.right>0-t&&o.left<(window.innerWidth||document.documentElement.clientWidth)+t&&o.top<(window.innerHeight||document.documentElement.clientHeight)+t}},{key:"setupGpt",value:function(){var e=this;return window.googletag.cmd.push(function(){var t=e.args,o=(t.demo_val,t.experience),s=(t.demo_unit_name,e.unit_name);e.logger.log("Unit name set ("+s+")"),window.googletag.pubads().enableSingleRequest(),window.googletag.pubads().disableInitialLoad(),window.googletag.pubads().collapseEmptyDivs(),window.googletag.pubads().setTargeting("exp",o),window.googletag.enableServices(),e.handle_deps()}),!0}},{key:"handle_deps",value:function(){var e=this,t=this.args,o=t.demo_val,s=t.slotsRendered,r=t.prefix,i=t.handleGPT;if(!o){window.Krux||((window.Krux=function(){Krux.q.push(arguments)}).q=[]);var n=function(e){var t=void 0,o="kx"+e;return window.localStorage?window.localStorage[o]||"":navigator.cookieEnabled?(t=document.cookie.match(o+"=([^;]*)"))&&unescape(t[1])||"":""};"undefined"!=typeof Krux&&this.krux_id?(Krux.user=n("user"),Krux.segments=n("segs")&&n("segs").split(",")||[],Krux.segments&&window.googletag.pubads().setTargeting("ksg",window.maybe_to_string(Krux.segments)),Krux.user&&window.googletag.pubads().setTargeting("kuid",window.maybe_to_string(Krux.user)),window.googletag.pubads().setTargeting("thost",encodeURIComponent(location.hostname))):this.logger.warn("Krux not defined"),"function"==typeof i&&i()}window.googletag.pubads().addEventListener("slotRenderEnded",function(t){e.out_of_page_rendered||(!t.size||!t.size.length||parseInt(t.size[0])<10)&&(e.out_of_page_rendered=!0,(document.body||document.getElementsByTagName("body")[0]).classList.add(r+"-is-rendered"),"function"==typeof s&&s())})}},{key:"refreshEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return!1;var r=this.args,i=r.prefix,n=r.experience,l=(this.unit_name,Number.isInteger(s)?s:this.args.refresh_throttle),a=i+"-slot",g=i+"-"+n,u=[];if(this.refresh_lock)return this.logger.warn("locked up"),!1;if(this.refresh_lock=!0,e.classList.contains(a)&&e.classList.contains(g)?(this.logger.log("Refreshing individual el"),u.push(e)):(this.logger.log("Refreshing multiple els"),u=e.querySelectorAll("."+g)),!u.length)return this.logger.warn("No slots to refresh"),this.refresh_lock=!1,!1;u=[].slice.call(u);var d=[],h=!0,p=!1,c=void 0;try{for(var f,_=u[Symbol.iterator]();!(h=(f=_.next()).done);h=!0){var v=f.value;if(v.getAttribute("data-slot-id")){if(v.classList.contains(i+"-out-of-page")||"out_of_page"===v.getAttribute("data-type"))continue;if(o&&!this.is_el_in_viewport(v))continue;for(var y=v.getAttribute("data-slot-id"),w=0;w<this.slots.length;w++)if(this.slots[w].id==y){d.push(this.slots[w].slot);break}}}}catch(e){p=!0,c=e}finally{try{!h&&_.return&&_.return()}finally{if(p)throw c}}return d.length?(this.logger.log("Refreshing slots: ",u),void 0!==this.self.Pre?window.googletag.cmd.push(function(){t.self.Pre.refresh(d).then(function(){t.queueSlots(d,!0)},function(e){t.logger.warn("Promise rejected from Pre",e)}).catch(function(e){t.logger.error(e)})}):window.googletag.cmd.push(function(){t.queueSlots(d,!0)}),setTimeout(function(){t.refresh_lock=!1},l),!0):(this.logger.warn("No slots to refresh"),this.refresh_lock=!1,!1)}},{key:"processEl",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t)return!1;var o=this.args,s=o.prefix,r=o.experience,i=o.oop_class,n="."+s+"-"+r,l=document.querySelector("."+i),a=t.querySelectorAll(n),g=void 0;return a=Array.from(a),l&&!a.includes(l)&&a.push(l),a.length?(this.logger.log("Found "+a.length+" slots for ("+r+" experience)"),window.googletag.cmd.push(function(){g=e.getSlots(a),e.addSlots(g),e.addGroup(g)}),!0):(this.logger.warn("Found no slots for experience: ("+r+") experience"),!1)}},{key:"getSlots",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=this.args,s=o.experience,r=o.slot_args,i=o.prefix,n=[];if(!r)return this.logger.error("No slot types found"),!1;if(!t.length)return this.logger.error("getSlots: no slots given"),!1;this.logger.log("Slots for exp: ("+s+")",t);for(var l=0;l<t.length;l++){(function(o){var s=Date.now()+"-"+Math.random().toString(36).substr(2,4),l=i+"-"+s,a=void 0,g=void 0,u=function(t,o){if(!t||!o||!r[t])return!1;a=r[t].sizes||[],g=r[t].keyvals||{},n.push({id:s,el_id:l,roadblock_id:"",group_id:"",type:t,sizes:a,keyvals:g,lazy:1==o.getAttribute("data-no-lazy")||e.args.lazy,el:o,gpt_slot:null}),e.logger.log("Slot of type ("+t+") collected with id: "+l,o)};if(t[o].getAttribute("data-slot-id"))return e.logger.log("Skipping slot: ",t[o].getAttribute("data-slot-id")),"continue";if(t[o].id=l,t[o].setAttribute("data-slot-id",s),t[o].getAttribute("data-slot-type"))u(t[o].getAttribute("data-slot-type"),t[o]);else{var d=[];for(var h in r)d.includes(l)||r.hasOwnProperty(h)&&t[o].classList.contains(r[h].class)&&(d.push(l),u(h,t[o]))}})(l)}if(!n.length)return this.logger.warn("No new slots!"),!1;if(this.bigtop_enabled){var a=new CustomEvent("bs_slot_elements_processed",{detail:{slots:n}});window.dispatchEvent(a)}return n}},{key:"addSlots",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return this.logger.warn("addSlots: no slot length"),!1;for(var t=0,o=0;o<e.length;o++)e[o].id&&(this.slots.push({id:e[o].id,slot:e[o]}),t++);return!!t||(this.logger.warn("No slots to added to inventory"),!1)}},{key:"addGroup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.args,o=t.supports,s=t.experience,r=t.keyvals,i=Date.now()+"-"+Math.random().toString(36).substr(2,4);if(e.length){o[s]||this.logger.log(s+" not defined for custom units"),r.supports||(this.logger.warn("No custom units supported"),r.supports={});var n=[];r.supports&&r.supports.length&&o[s]&&o[s].length&&Array.from(o[s]).forEach(function(e){r.supports.includes(e)&&n.push(e)}),r.supports=n,this.doGroup({id:i,keyvals:r,slots:e})}else this.logger.warn("No slots to add to group")}},{key:"doGroup",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=this.args,s=o.demo_val,r=o.demo_key,i=t.keyvals,n=t.slots,l=this.unit_name;if(!i)return this.logger.error("No group keyvals, killing group"),!1;if(!n)return this.logger.error("No group slots, killing group"),!1;r&&s&&((i={})[r]=s);for(var a in i)i.hasOwnProperty(a)&&i[a]&&window.googletag.pubads().setTargeting(a,window.maybe_to_string(i[a]));return this.logger.log("Group level targeting applied",i),this.self.Pre&&this.self.Pre.is_enabled?this.self.Pre.process(n,l).then(function(){e.logger.log("Bidding process completed!"),e.registerSlots(n)},function(t){e.logger.error(t)}).catch(function(t){e.logger.error(t)}):this.registerSlots(n),!0}},{key:"registerSlots",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=this.unit_name,s=Date.now()+"-"+Math.random().toString(36).substr(2,4),r=[],i=0;i<t.length;i++)r[i]=function(t){var r=t.keyvals||{};"out_of_page"===t.type?(t.gpt_slot=window.googletag.defineOutOfPageSlot(o,t.el_id).addService(window.googletag.pubads()),e.logger.log("Out of page slot defined")):t.el&&t.el.getAttribute("data-slot-type")&&"bigtop"===t.el.getAttribute("data-slot-type")?t.gpt_slot=window.googletag.defineSlot(o,t.sizes,t.el_id).setCollapseEmptyDiv(!0,!0).addService(window.googletag.pubads()):t.gpt_slot=window.googletag.defineSlot(o,t.sizes,t.el_id).addService(window.googletag.pubads());for(var i in r)r.hasOwnProperty(i)&&r[i]&&t.gpt_slot.setTargeting(i,window.maybe_to_string(r[i]));e.logger.log("Slot (id: "+t.el_id+") targeting applied ("+t.type+"). Keyvals: ",r),"roadblock"===r.type&&(t.roadblock_id=s)}(t[i]);if(!t.length)return this.logger.error("No slots to register"),!1;this.logger.log("Registering slots...",t);for(var n=0;n<t.length;n++)r[n]=function(e){window.googletag.display(t[e].el_id)}(n);return this.queueSlots(t),!0}},{key:"queueSlots",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=[],s=[],r=this.args.lazy,i=this.args.refresh_in_view;if(!e.length)return!1;var n=new CustomEvent("bs_slot_elements_defined");window.dispatchEvent(n),this.logger.log("Queuing slots..."),window.googletag.enableServices();for(var l=0;l<e.length;l++)"object"===_typeof(e[l].gpt_slot)&&null!==e[l].gpt_slot?!i||e[l].lazy_override||this.is_el_in_viewport(e[l].el)?r&&e[l].lazy?-1===s.indexOf(e[l].id)&&s.push(e[l].id):o.push(e[l].gpt_slot):-1===s.indexOf(e[l].id)&&s.push(e[l].id):e[l].keyvals&&"out_of_page"!==e[l].keyvals.type&&this.logger.warn("slot object missing gpt_slot",e[l]);return this.logger.warn("queued "+o.length+" slots and "+s.length+" lazy slots"),this.renderSlots(o,t),this.processLazyQueue(s),{gpt_slots:o,lazy_slot_ids:s}}},{key:"processLazyQueue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.logger.log("processLazyQueue"),!(this.busy||!t.length)&&(this.lazy_slot_ids=t,this.busy=!0,window.requestAnimationFrame(this.actuallyProcessLazyQueue.bind(this)),window.addEventListener("scroll",function(){window.requestAnimationFrame(e.actuallyProcessLazyQueue.bind(e))}),!0)}},{key:"actuallyProcessLazyQueue",value:function(){var e=this,t=this.lazy_slot_ids||[];if(!t.length)return!1;for(var o=this.args.lazy_mod,s=[],r=this.slots,i=0;i<t.length;i++){(function(i){var n={};if(r.forEach(function(e){e.id!==t[i]||(n=e)}),!(n=n.slot||{}).gpt_slot||!e.is_el_in_viewport(n.el,o)||s.includes(n.gpt_slot))return"continue";s.push(n.gpt_slot),t=t.filter(function(e,t){if(e!==n.id)return e})})(i)}for(i=0;i<t.length;i++){(function(e){var o=r.find(function(o){if(o.id===t[e])return o});if(!(o=o.slot||{}).gpt_slot||!o.roadblock_id||s.includes(o.gpt_slot))return"continue";s.push(o.gpt_slot),t=t.filter(function(e,t){if(e!==o.id)return e})})(i)}return this.lazy_slot_ids=t,this.busy=!1,this.renderSlots(s,!0),!0}},{key:"renderSlots",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o="",s={};return!!e.length&&(this.logger.log("Rendering slots..."),t?s.changeCorrelator=!1:window.googletag.pubads().updateCorrelator(),o="rendering "+e.length+" slots",o+=t?" with the same correlator id":" with a fresh correlator id",this.logger.log(o),this.logger.log("gpt_slots",e),this.logger.log("gpt_args",s),window.googletag.pubads().refresh(e,s),!0)}}]),e}();
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),Injector=function(){function t(e){var n=e.prefix,o=e.beforeInject,r=e.nodeFilter,i=e.self,l=void 0===i?null:i,a=e.content_target,s=e.inject_target,g=e.slot_type,h=void 0===g?"mpu":g,c=e.skip_targets,u=void 0===c?[]:c,f=e.disablePotentialsOn,d=e.filterInjectable,v=e.options,p=void 0===v?{}:v,y=e.debug,_=void 0!==y&&y,b=e.experience;_classCallCheck(this,t),this.logger=new Logger("Injector",_),this.logger.log("Init"),this.args={content_target:a,inject_target:s,slot_type:h,skip_targets:u,disablePotentialsOn:f,filterInjectable:d,options:p,experience:b,prefix:n,beforeInject:o,nodeFilter:r},this.self=l,this.is_initialized=!1,this.enabled=!1;var m={start_index:3,look_back:2,look_ahead:3,skip_ahead:10,max_ads:2,min_good_length:400,min_content_length:1100};this.default_options=m,this.args.options.hasOwnProperty(b)?(this.args.options=l.extend(this.args.options[b],m),this.logger.log("Options set for ("+b+") experience",this.args.options)):(this.args.options=m,this.logger.warn("Experience ("+b+") not found in options. Using defaults.",this.args.options));var j=document.querySelector(a);j?this.setup(j):this.logger.log("Skipping injector, target: "+a+" not found")}return _createClass(t,[{key:"setup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.args,n=e.content_target,o=e.inject_target,r=(e.options,e.disablePotentialsOn),i=e.filterInjectable,l=e.experience;if(t){this.is_initialized=!0,this.enabled=!0;var a=t.querySelectorAll(o),s=t.children;s=[].slice.call(s);var g=t.textContent.length,h=!1;if("string"==typeof r&&(h=!window.document.querySelector(r)),h)return!0;var c=0;if(s.forEach(function(t){"P"===t.tagName&&(c+=t.textContent.length)}),g<c)return this.logger.warn("Length of "+n+" < "+c),!1;if("function"==typeof i&&(a=i(a,l)||[],this.logger.log("_filtered_injectables",a)),a&&a.length){this.logger.log("Found "+a.length+" pre-tagged nodes",a),this.inject(a);var u=!0,f=!1,d=void 0;try{for(var v,p=a[Symbol.iterator]();!(u=(v=p.next()).done);u=!0){var y=v.value;y.parentNode.removeChild(y)}}catch(t){f=!0,d=t}finally{try{!u&&p.return&&p.return()}finally{if(f)throw d}}return this.logger.log("Disabling auto injection sequence."),!0}return s&&s.length?(this.logger.log("Found "+s.length+" potential nodes",s),this.processNodes(s)):this.logger.warn("Found no children of given target "+s),!0}}},{key:"processNodes",value:function(t){var e=this.args,n=(e.inject_target,e.options),o=e.nodeFilter,r=n.max_ads,i=n.skip_ahead,l=n.start_index,a=[];if(!(t=t.slice(l,t.length)).length)return!1;for(var s=0;s<t.length;s++){"function"==typeof o&&(s=o(t[s],s));var g=this.goodAbove(t[s]),h=this.goodBelow(t[s]);g&&h&&a.length<r&&(a.push(t[s]),s+=i)}return this.logger.log("Found "+a.length+" potential nodes to inject",a),!!a.length&&(this.inject(a),!0)}},{key:"goodEl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.args,o=n.inject_target,r=n.skip_targets;if(o=o.slice(1,o.length),t.classList.contains(o))return!1;if("left"===getComputedStyle(t).float||"right"===getComputedStyle(t).float||t.textContent.length<16)return!1;if(r.length){var i=!0,l=!1,a=void 0;try{for(var s,g=r[Symbol.iterator]();!(i=(s=g.next()).done);i=!0){var h=s.value;if(t.classList.contains(h))return!1}}catch(t){l=!0,a=t}finally{try{!i&&g.return&&g.return()}finally{if(l)throw a}}}if(e){var c=t.querySelectorAll("*"),u=["img","object","iframe"],f=!0,d=!1,v=void 0;try{for(var p,y=u[Symbol.iterator]();!(f=(p=y.next()).done);f=!0){var _=p.value;if(t.getElementsByTagName(_).length)return!1}}catch(t){d=!0,v=t}finally{try{!f&&y.return&&y.return()}finally{if(d)throw v}}if(c&&c.length){var b=!0,m=!1,j=void 0;try{for(var x,k=c[Symbol.iterator]();!(b=(x=k.next()).done);b=!0){var w=x.value;if("left"===getComputedStyle(w).float||"right"===getComputedStyle(w).float)return!1}}catch(t){m=!0,j=t}finally{try{!b&&k.return&&k.return()}finally{if(m)throw j}}}}return!0}},{key:"goodBelow",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.args,i=(r.inject_target,r.options),l=i.look_ahead,a=i.min_good_length,s=void 0;return!(!t||"P"!==t.tagName)&&(s=t.nextElementSibling,!(!this.goodEl(t,!0)||n==l)&&((o+=t.textContent.length)>=a?!(n<l)||function t(n,o){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=void 0;return!n||!("P"!==n.tagName||!e.goodEl(n,!0))&&(i=n.nextElementSibling,(r+=n.textContent.length)>=a||o==l||t(i,++o,r))}(s,++n):this.goodBelow(s,++n,o)))}},{key:"goodAbove",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(this.args.inject_target,this.args.options.look_back),o=void 0;return!t||(o=t.previousElementSibling,n<0||!(!this.goodEl(t)||!o)&&(e==n||this.goodAbove(o,++e)))}},{key:"inject",value:function(t){var e=this.args,n=e.prefix,o=e.experience,r=e.slot_type,i=e.beforeInject,l=n+"-"+o,a=n+"-slot-"+r,s=!1;if(!t.length)return!1;"function"==typeof i&&"string"!=typeof(a=i(a,o))&&(a=n+"-slot-"+r);var g='<div class = "'+n+"-slot "+a+" "+l+'"></div>',h=!0,c=!1,u=void 0;try{for(var f,d=t[Symbol.iterator]();!(h=(f=d.next()).done);h=!0)f.value.insertAdjacentHTML("afterend",g),this.logger.log("Node injected with class ("+l+")"),s=!0}catch(t){c=!0,u=t}finally{try{!h&&d.return&&d.return()}finally{if(c)throw u}}return s}}]),t}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var l=0;l<t.length;l++){var s=t[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,l,s){return l&&e(t.prototype,l),s&&e(t,s),t}}(),AdBlock=function(){function e(t){var l=t.init,s=void 0===l?null:l,o=t.self,n=void 0===o?null:o,i=t.onCaughtBait,a=void 0===i?null:i,d=t.blocked_class,c=void 0===d?null:d,r=t.bait_class,u=void 0===r?null:r,g=t.bait_select,h=void 0===g?null:g,v=t.bait_style,y=void 0===v?null:v,b=t.demo_val,f=t.demo_key,_=t.debug,m=void 0!==_&&_,k=t.experience;_classCallCheck(this,e),this.logger=new Logger("AdBlock",m),this.logger.log("Init"),this.args={onCaughtBait:a,blocked_class:c||"plundered",bait_class:u||"ad_container afs_ads afs_ads_dt",bait_select:h||"afs_ads_dt",bait_style:y||"width: 300px; height: 250px; position: absolute; left: -11111px; top: -111px; pointer-events: none;",demo_key:f,demo_val:b},this.self=n,this.self.ads_blocked=!1,"function"==typeof s&&s(k),this.check()}return _createClass(e,[{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.body||document.getElementsByTagName("body")[0],l=this.args.blocked_class;return e=e||t,this.logger.log("Applying..."),!e.classList.contains(l)&&(e.classList.add(l),!0)}},{key:"revert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.body||document.getElementsByTagName("body")[0],l=this.args.blocked_class;return e=e||t,this.logger.log("Reverting..."),!!e.classList.contains(l)&&(e.classList.remove(l),!0)}},{key:"get",value:function(){return this.self.ads_blocked}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"boolean"==typeof e&&(this.self.ads_blocked=e,!0)}},{key:"check",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.args,l=t.bait_class,s=t.bait_select,o=t.bait_style,n=t.demo_val,i=t.demo_key,a=t.onCaughtBait,d=document.body||document.getElementsByTagName("body")[0],c=void 0,r=void 0,u=void 0,g=void 0;return c=document.createElement("div"),c.className=l,c.setAttribute("style",o),d.insertBefore(c,d.firstChild),r=e||document.getElementsByClassName(s),i&&"adblock"===n?this.self.ads_blocked=!0:r.length&&(u=r[0].currentStyle?r[0].currentStyle.display:getComputedStyle(r[0],null).display,g=r[0].currentStyle?r[0].currentStyle.visibility:getComputedStyle(r[0],null).visibility,"none"===u||"hidden"===g?(this.self.ads_blocked=!0,this.logger.log("Ads blocked")):this.logger.log("Ads Unblocked")),"function"==typeof a&&a(this.self.ads_blocked,this),r[0].parentNode.removeChild(r[0]),this.self.ads_blocked}}]),e}();
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_Burnside=function(){function e(t){var n=this,i=arguments,o=t.prefix,r=void 0===o?"dtads":o,s=t.adblock,d=void 0===s?{}:s,c=t.injector,a=void 0===c?{}:c,u=t.pre,l=void 0===u?{}:u,p=t.ads,g=void 0===p?{}:p,f=t.experiences,h=void 0===f?{}:f,w=t.debug,v=void 0!==w&&w,m=t.demo_val,x=void 0===m?null:m,b=t.demo_key,y=void 0===b?"":b,_=t.krux_id,k=void 0===_?null:_;arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(_classCallCheck(this,e),this.logger=new Logger("",v),this.logger.log("Init"),y&&x&&this.logger.log("demo set",y+":"+x),this.extend=function(e){n.logger.log("extending");for(var t=1;t<i.length;t++)if(i[t])for(var o in i[t])i[t].hasOwnProperty(o)&&(e[o]=i[t][o]);return e||{}},function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}(),window.maybe_to_string=function(e){return"number"!=typeof e?e:e.toString()},this.filterBidders=l.filterBidders,this.burnside_cdn="//burnside.dtcn.com",this.gpt_src="https://www.googletagservices.com/tag/js/gpt.js",g.krux_id=k,this.setup_deps(k),this._injector_experiences=a.options,this.prefix=r,this.defineExperience(h),a.prefix=r,g.prefix=r,this.demo_val=x,d.demo_key=y,d.demo_val=x,g.demo_key=y,g.demo_val=x,d.debug=v,a.debug=v,l.debug=v,g.debug=v,d.experience=this.experience,a.experience=this.experience,g.experience=this.experience,a.self=this,d.self=this,g.self=this,this.AdBlock=new AdBlock(d),this.AdBlock.get())this.logger.warn("Ads blocked. Halting...");else if(this.Injector=new Injector(a),l.prebid&&l.prebid.enable){var E=this.burnside_cdn+"/prebid-configs/"+l.prebid.config+"/prebid-config.js",j=function(e){var t="get_prebid_data",i=window.document.createElement("script");i.type="text/javascript",i.src=e,window[t]=function(e){l.prebid.bids=n.process_prebid_data(e),l.prebid.bids.length&&(n.Pre=new Pre(l)),n.Ads=new Ads(g),window.document.head.removeChild(i),i=null,delete window[t]},window.document.head.appendChild(i)};googletag.cmd.push(function(){j(E)})}else googletag.cmd.push(function(){n.Ads=new Ads(g)})}return _createClass(e,[{key:"setup_deps",value:function(e){var t=this.gpt_src;if(e){var n="\n\t\t\t\twindow.Krux||((Krux=function(){ Krux.q.push(arguments)}).q=[]);\n\t\t\t\t(function(){\n\t\t\t\t\twindow.Krux||((Krux=function(){Krux.q.push(arguments)}).q=[]);\n\t\t\t\t\t(function(){\n\t\t\t\t\tvar k=document.createElement('script');k.type='text/javascript';k.async=true;\n\t\t\t\t\tk.src=(location.protocol==='https:'?'https:':'http:')+'//cdn.krxd.net/controltag/"+e+".js';\n\t\t\t\t\tvar s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(k,s);\n\t\t\t\t\t}());\n\t\t\t\t}());\n\t\t\t",i=window.document.createElement("script");i.type="text/javascript",i.className="kxct",i.setAttribute("data-id",e),i.setAttribute("data-timing","async"),i.setAttribute("data-version",3),i.text=n,"function"!=typeof window.Krux&&window.document.head.appendChild(i)}var o=window.document.createElement("script");o.type="text/javascript",o.src=t,window.googletag=window.googletag||{cmd:[]},(!window.googletag||window.googletag&&"function"!=typeof googletag.getVersion)&&window.document.head.appendChild(o)}},{key:"process_prebid_data",value:function(e){return e&&e.bids?("function"==typeof this.filterBidders&&(e=this.filterBidders(e,this.experience)),e.bids):[]}},{key:"enabled",value:function(){return!this.AdBlock||!this.AdBlock.get()}},{key:"get_dtdemo",value:function(){return this.demo_val}},{key:"defineExperience",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var n=this.prefix,i=this._injector_experiences,o=t||window.innerWidth,r=document.body||document.getElementsByTagName("body"),s=[];this.experience=null;for(var d in e)if(e.hasOwnProperty(d)){if(!i[d]){"function"!=typeof e[d]&&this.logger.error("Missing injector.option for "+d);continue}(0===e[d]||e[d]<o)&&s.push(e[d])}if(s.length>0){var c=Math.max.apply(Math,s);for(var a in e)e[a]===c&&(this.experience=a)}return this.experience=this.experience||"default",r.classList.add(n+"-exp-"+this.experience),this.logger.log("Experience set to ("+this.experience+")"),"function"==typeof e.onExperienceDefined&&e.onExperienceDefined(this.experience),this.experience}}}]),e}();